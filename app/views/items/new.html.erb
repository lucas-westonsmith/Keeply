<div class="form-container">
  <h1 class="form-title"><span class="text-gradient angry-underline-blue" style="color: #3699e0; font-weight: bold;">Add a new item</span></h1>
  <p class="form-description">Fill out the details below to add a new item to your collection.</p>

  <%= simple_form_for (@list ? [@list, @item] : @item), local: true, html: { id: "item-form", data: { controller: "dynamic-lists", "dynamic-lists-url-value" => update_lists_items_path } } do |f| %>
    <%= hidden_field_tag :super_list_id, @super_list_id, id: "hidden-super-list-id" %>

    <div class="form-columns">
      <!-- Colonne gauche -->
      <div class="form-column">
        <!-- Title -->
        <div class="form-group">
          <%= f.label :title, class: "form-label", style: "font-weight: bold;" do %>
            Title <span style="font-weight: normal;">(required)</span>
          <% end %>
          <%= f.input :title, as: :string, placeholder: "Enter the item's title", label: false, required: true, class: "form-input" %>
        </div>

        <!-- Description -->
        <div class="form-group">
          <%= f.label :description, "Description", class: "form-label", style: "font-weight: bold;" %>
          <%= f.input :description, as: :text, placeholder: "Provide a short description of the item", label: false, class: "form-input" %>
        </div>

        <!-- Issuer -->
        <div class="form-group">
          <%= f.label :issuer, class: "form-label", style: "font-weight: bold;" do %>
            Issuer <span style="font-weight: normal;">(required)</span>
          <% end %>
          <%= f.input :issuer, as: :string, placeholder: "Enter the issuer name (e.g., EDF, Super U)", label: false, required: true, class: "form-input" %>
        </div>

        <!-- Pick a family -->
        <div class="form-group">
          <label class="form-label" style="font-weight: bold;">Pick a family <span style="font-weight: normal;">(required)</span></label>
          <%= select_tag :super_list_id,
              options_for_select(current_user.super_lists.pluck(:title, :id), @super_list_id),
              { class: "form-select", required: true, data: { action: "change->dynamic-lists#updateLists" } } %>
        </div>

        <!-- Add to Lists -->
        <div id="lists-container" data-dynamic-lists-target="listsContainer">
          <%= render partial: "items/lists", locals: { filtered_lists: @filtered_lists, form: f, item_lists: [] } %>
        </div>
      </div>

      <!-- Colonne droite -->
      <div class="form-column">
        <!-- Price -->
        <div class="form-group">
          <%= f.label :price, class: "form-label", style: "font-weight: bold;" do %>
            Price (â‚¬) <span style="font-weight: normal;">(required)</span>
          <% end %>
          <%= f.input :price, as: :decimal, placeholder: "Enter the price in euros", label: false, required: true, class: "form-input" %>
        </div>

        <!-- Condition -->
        <div class="form-group">
          <%= f.label :condition, "Condition", class: "form-label", style: "font-weight: bold;" %>
          <%= f.input :condition, as: :select, collection: ['Poor', 'Okay', 'Good', 'Excellent'], include_blank: "Select condition", label: false, class: "form-select" %>
        </div>

        <!-- Category -->
        <div class="form-group">
          <%= f.label :category, "Category", class: "form-label", style: "font-weight: bold;" %>
          <%= f.input :category, as: :string, placeholder: "e.g., Electronics, Furniture", label: false, class: "form-input" %>
        </div>

        <!-- Upload a picture -->
        <div class="form-group">
          <%= f.label :photo, "Upload a picture of the item", class: "form-label", style: "font-weight: bold;" %>
          <%= f.input :photo, as: :file, label: false, class: "form-input-file" %>
        </div>

        <!-- Upload Invoice -->
        <div class="form-group">
          <%= f.label :invoice, "Upload invoice (PDF or image)", class: "form-label", style: "font-weight: bold;" %>
          <%= f.input :invoice, as: :file, label: false, class: "form-input-file" %>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <%= f.submit 'Add item', class: 'btn btn-primary action-button' %>
    </div>
  <% end %>

  <!-- Cancel Button -->
  <div class="form-cancel">
    <%= link_to 'Cancel', request.referer || items_path, class: 'btn btn-secondary action-button' %>
  </div>
</div>
